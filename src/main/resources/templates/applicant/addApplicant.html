<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/headerSection :: headerSectionFragment}"></head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">
    <!-- wrapper start -->
    <nav th:replace="~{fragments/navbarSection :: navbarSectionFragment}"></nav>
    <!-- navbar Section -->
    <aside th:replace="~{fragments/sidebarSection :: sidebarSectionFragment}"></aside>
    <!-- navbar Section -->
    <div class="content-wrapper"><!-- content-wrapper Start -->
        <section th:replace="~{fragments/contentHeader :: contentHeaderSectionFragment}"></section>
        <!-- Form Header  Path -->
        <section th:replace="~{fragments/smallBoxSection :: smallBoxSectionFragment}"></section>
        <!-- Small Box Set -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="card">
                                    <div class="card-body">
                                        <h4>First sud Header</h4>
                                        <form role="form">
                                            <a class="btn btn-primary" href="/home"> <i class="fa fa-home"></i> Home
                                            </a>
                                            <a class="btn btn-primary" href="/applicant"><i class="fa fa-list"></i>&nbsp;
                                                View List </a>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-9">
                                <div class="card">
                                    <div class="card-body">
                                        <h4>Secondary Header </h4>
                                        <form enctype="multipart/form-data"
                                              method="post"
                                              th:action="${addStatus==true?'/applicant/save' :'/applicant/update'}"
                                              th:object="${applicant}">
                                            <div class="row">
                                                <!--left side-->
                                                <div class="col-md-6"><!--Left Side-->
                                                    <!--ID -->
                                                    <div class="form-row text-right" id="idStatus"
                                                         th:if="${addStatus==false}">

                                                        <label class="control-label" for="id">ID :</label>


                                                        <input class="form-control" id="id" readonly th:field="*{id}"
                                                               type="text"/>

                                                    </div>


                                                    <!--Full Name-->
                                                    <div class="form-group">

                                                        <label class="control-label">Full Name :</label>
                                                        <input class="form-control" id="name"
                                                               required
                                                               th:field="*{nameInFullName}" type="text"/>
                                                        <span class="error" id="nameError"
                                                              th:errors="*{nameInFullName}"
                                                              th:if="${#fields.hasErrors('nameInFullName')}">Error Name</span>
                                                    </div>
                                                    <!--Name with Initials-->
                                                    <div class="form-group">
                                                        <label class="control-label" for="callingName">Name With Initial
                                                            :</label>
                                                        <input class="form-control" id="callingName"
                                                               minlength="5" tabindex="5" th:field="*{nameWithInitial}"
                                                               type="text"/>
                                                        <span class="error" id="callingNameError"
                                                              th:errors="*{nameWithInitial}"
                                                              th:if="${#fields.hasErrors('nameWithInitial')}">Error
                                                                       Calling                                                                                                                        Name</span>
                                                    </div>
                                                    <!--Nic-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="nic">NIC No :</label>

                                                        <input class="form-control" id="nic" maxlength="12"
                                                               minlength="10" required
                                                               tabindex="6"
                                                               th:field="*{nic}" type="text"/>
                                                        <span class="error" id="nicError" th:errors="*{nic}"
                                                              th:if="${#fields.hasErrors('nic')}">Error
                                                               NIC Number</span>

                                                    </div>
                                                    <!--Gender-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="gender">Gender :</label>

                                                        <select class="form-control" id="gender" required
                                                                tabindex="7" th:field="*{gender}">
                                                            <option value="">Please select</option>
                                                            <option th:each="genders : ${gender}"
                                                                    th:selected="${genders==applicant.gender?'selected':'unselected'}"
                                                                    th:text="${genders.gender}"
                                                                    th:value="${genders}"></option>
                                                        </select>

                                                    </div>
                                                    <!--Date of birth-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="dateOfBirth">Birth date
                                                            :</label>
                                                        <input class="form-control" id="dateOfBirth"
                                                               placeholder="Ex: 1990 - 01 - 20" required
                                                               tabindex="8"
                                                               th:field="*{dateOfBirth}" type="date"/>
                                                        <span class="error"
                                                              th:errors="*{dateOfBirth}"
                                                              th:if="${#fields.hasErrors('dateOfBirth')}">Error Birthday</span>

                                                    </div>
                                                    <!--Designation-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="applyingRank">Applying Rank
                                                            :</label>

                                                        <select class="form-control" id="applyingRank"
                                                                required tabindex="10"
                                                                th:field="*{applyingRank}">
                                                            <option value="">Please select</option>
                                                            <option th:each="applyingRank : ${applyingRanks}"
                                                                    th:text="${applyingRank.applyingRank}"
                                                                    th:value="${applyingRank}"></option>
                                                        </select>

                                                    </div>
                                                    <!--Nationality-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="nationality">Nationality
                                                            :</label>

                                                        <select class="form-control" id="nationality"
                                                                required tabindex="10"
                                                                th:field="*{nationality}">
                                                            <option value="">Please select</option>
                                                            <option th:each="nationality : ${nationalities}"
                                                                    th:text="${nationality.nationality}"
                                                                    th:value="${nationality}"></option>
                                                        </select>

                                                    </div>
                                                    <!--CivilStatus-->
                                                    <div class="form-group">
                                                        <label class="control-label" for="civilStatus">Civil Status
                                                            :</label>

                                                        <select class="form-control" id="civilStatus"
                                                                required tabindex="11"
                                                                th:field="*{civilStatus}">
                                                            <option value="">Please select</option>
                                                            <option th:each="civilStatu : ${civilStatus}"
                                                                    th:selected="${civilStatu==applicant.civilStatus?'selected':'unselected'}"
                                                                    th:text="${civilStatu.CivilStatus}"
                                                                    th:value="${civilStatu}"></option>
                                                        </select>

                                                    </div>

                                                </div>
                                                <!--Right Side-->
                                                <div class="col-md-6">
                                                    <!--Height-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="height">Height(cm) :</label>

                                                        <input class="form-control" id="height" maxlength="12"
                                                               minlength="10" required
                                                               tabindex="6"
                                                               th:field="*{height}" type="number" min="0"/>
                                                        <span><i><small>(Height must be 162cm)</small></i></span>

                                                    </div>
                                                    <!--Weight-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="weight">Weight(Kg) :</label>

                                                        <input class="form-control" id="weight" maxlength="12"
                                                               minlength="10" required
                                                               tabindex="6"
                                                               th:field="*{weight}" type="number" min="0" step="0.5"/>
                                                        <span><i><small>(Weight must be 60Kg)</small></i></span>

                                                    </div>
                                                    <!--chest-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="chest">Chest(cm) :</label>

                                                        <input class="form-control" id="chest" maxlength="12"
                                                               minlength="10" required
                                                               tabindex="6"
                                                               th:field="*{chest}" type="number" min="0"/>
                                                        <span><i><small>(Chest must be 34cm(Male) & 36cm(Female))</small></i></span>

                                                    </div>
                                                    <!--Address-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="address">Address :</label>

                                                        <textarea class="form-control" id="address"
                                                                  required tabindex="12"
                                                                  th:field="*{address}" rows="2"></textarea>
                                                        <span class="error" id="addressError"
                                                              th:errors="*{address}"
                                                              th:if="${#fields.hasErrors('address')}">Error Address</span>

                                                    </div>
                                                    <!--Mobile Number-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="mobile">Mobile No
                                                            :</label>

                                                        <input class="form-control mobile" id="mobile"
                                                               maxlength="10" min="9"
                                                               required
                                                               tabindex="13" th:field="*{mobile}"
                                                               type="text"/>
                                                        <span class="error" id="mobileOneError"
                                                              th:errors="*{mobile}"
                                                              th:if="${#fields.hasErrors('mobile')}">Error Mobile Number</span>

                                                    </div>
                                                    <!--Land No-->
                                                    <div class="form-group">
                                                        <label class="control-label" for="land">Land No
                                                            :</label>
                                                        <input class="form-control" id="land"
                                                               minlength="5" tabindex="5" th:field="*{land}"
                                                               type="text"/>
                                                        <span class="error" id="land"
                                                              th:errors="*{land}"
                                                              th:if="${#fields.hasErrors('land')}">Error
                                                                       Calling                                                                                                                        Name</span>
                                                    </div>
                                                    <!--Email-->
                                                    <div class="form-group">

                                                        <label class="control-label" for="email">Email :</label>

                                                        <input class="form-control" id="email" required
                                                               tabindex="16" th:field="*{email}"
                                                               type="email"/>
                                                        <span class="error" id="emailError"
                                                              th:errors="*{email}"
                                                              th:if="${#fields.hasErrors('email')}">Error Email</span>

                                                    </div>
                                                </div>
                                                <!--Gramaniladari find-->
                                                <div class="form-row mb-2 col-md-12">
                                                    <!--Province-->
                                                    <div class=" col-md-2">
                                                        <label class="form-label " th:for="province"> Province </label>

                                                        <select class="form-control" id="province">
                                                            <option value="">Please Select</option>
                                                            <option th:each="province : ${provinces}"
                                                                    th:text="${province.province}"
                                                                    th:value="${province}"></option>
                                                        </select>
                                                    </div>
                                                    <!--District-->
                                                    <div class=" col-md-2">
                                                        <label class="form-label " for="district"> District </label>

                                                        <select class="form-control" id="district">
                                                            <option value="">Please Select</option>
                                                        </select>
                                                    </div>
                                                    <!--AgOffice-->
                                                    <div class=" col-md-2 ">
                                                        <label class="form-label " th:for="${'agOffice'}"> Ag
                                                            Office </label>

                                                        <select class="form-control" id="agOffice">
                                                            <option value="">Please Select</option>
                                                        </select>
                                                    </div>
                                                    <!--Police-->
                                                    <div class=" col-md-2 ">
                                                        <label class="form-label " th:for="${'policeStation'}"> Police
                                                            Station </label>

                                                        <select class="form-control" id="policeStation">
                                                            <option value="">Please Select</option>
                                                        </select>
                                                    </div>
                                                    <!--GramaNiladhariDivision-->
                                                    <div class=" col-md-3"><label class="control-label"
                                                                                  for="gramaNiladhari">Grama
                                                        Niladhari Division :</label>
                                                        <select class="form-control" lass="form-control"
                                                                id="gramaNiladhari" required
                                                                tabindex="16" th:field="*{gramaNiladhari}">
                                                            <option value="">Please Select</option>
                                                        </select>
                                                        <span class="error"
                                                              th:errors="*{gramaNiladhari}"
                                                              th:if="${#fields.hasErrors('gramaNiladhari')}">Grama Niladhari DivisionError Email</span>

                                                    </div>
                                                </div>
                                                <!--photo -->
                                                <div class="form-row col-md-6 mb-3">
                                                    <div class="col-md-3 mr-5">
                                                        <label class="control-label">Image</label>
                                                        <input type="file" name="file" id="imgUpload"
                                                               accept="image/png, image/jpeg"/>
                                                    </div>
                                                    <div class="col-md-3"></div>
                                                    <div class="col-md-3 ml-5">
                                                        <img class="img-fluid ml-5" src="" id="image" alt=""
                                                             style="height: 100px;">
                                                    </div>
                                                </div>
                                                <!--Education Details-->
                                                <div div class="form-row mb-2 col-md-12">

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <button class="btn btn-primary" type="submit">
                                                    <i th:class="${addStatus==true?'fa fa-save mr-1':'fa fa-thumbs-up mr-1'}"></i>
                                                    <span
                                                            th:text="${addStatus==true?'Save' : 'Update'}"></span>
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- content-wrapper end -->
    <footer th:replace="~{fragments/footerSection :: footerSectionFragment}"></footer><!-- footer Section -->
</div><!-- wrapper end -->
<script th:replace="~{fragments/scriptSection :: scriptSectionFragment}"></script><!-- script Fragment -->
<script>

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#image').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]); // convert to base64 string
        }
    }

    $("#imgUpload").change(function () {
        readURL(this);
    });

    $('#province').bind("change", function () {
        provinceChange($(this).val());
    });
    $('#district').bind("change", function () {
        districtChange($(this).val());
    });
    $('#agOffice').bind("change", function () {
        agOfficeChange($(this).val());
    });
    $('#policeStation').bind("change", function () {
        policeStationChange($(this).val());
    });

    let optionFieldAdd = (url, id) => {
        let html = "<option value=''>Please select</option>";
        $.get(url, function (data) {
            data.forEach((item) => {
                    html += `<option value="${item.id}">${item.name} </option>`
                }
            )
            $(`#${id}`).html(html);
        });
    };

    function provinceChange(id) {
        let url = "[[${districtURL}]]" + id;
        optionFieldAdd(url, "district");
        $('#district').html(`<option value="">Please Select </option>`);
        $('#agOffice').html(`<option value="">Please Select </option>`);
        $('#policeStation').html(`<option value="">Please Select </option>`);
        $('#gramaNiladhari').html(`<option value="">Please Select </option>`);
    }

    function districtChange(id) {
        let url = "[[${agOfficeURL}]]" + id;
        optionFieldAdd(url, "agOffice");
        $('#agOffice').html(`<option value="">Please Select </option>`);
        $('#policeStation').html(`<option value="">Please Select </option>`);
        $('#gramaNiladhari').html(`<option value="">Please Select </option>`);
    }

    function agOfficeChange(id) {
        let url = "[[${policeStationURL}]]" + id;
        optionFieldAdd(url, "policeStation");
        $('#policeStation').html(`<option value="">Please Select </option>`);
        $('#gramaNiladhari').html(`<option value="">Please Select </option>`);
    }

    function policeStationChange(id) {
        let url = "[[${gramaNiladariURL}]]" + id;
        optionFieldAdd(url, "gramaNiladhari");
        $('#gramaNiladhari').html(`<option value="">Please Select </option>`);
    }
</script>
</body>
</html>